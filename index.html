<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPS-TOPIK Luy·ªán Nghe</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; text-align: center; padding: 20px; background-color: #f0f4f8; }
        .container { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); display: inline-block; max-width: 450px; width: 100%; text-align: left; }
        button { display: block; width: 100%; margin: 10px 0; padding: 15px; font-size: 16px; border-radius: 12px; border: 1px solid #ddd; background: #fff; cursor: pointer; transition: 0.2s; }
        .btn-listen { background: #28a745; color: white; border: none; font-weight: bold; font-size: 18px; text-align: center; }
        .btn-listen:active { background: #218838; }
        #explanation { display: none; margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 10px; border: 1px solid #ffeeba; }
        .btn-next { background: #007bff; color: white; border: none; display: none; margin-top: 10px; padding: 12px; border-radius: 10px; width: 100%; text-align: center; font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <div style="text-align:center; font-weight:bold; color:#007bff; margin-bottom:10px;">C√¢u h·ªèi: <span id="pos">1</span>/10</div>
    <button class="btn-listen" onclick="handleSpeak()">üîä B·∫•m ƒë·ªÉ nghe c√¢u h·ªèi</button>
    <div id="options"></div>
    <div id="explanation">
        <b style="color:#007bff">N·ªôi dung nghe:</b> <div id="script" style="font-weight:bold; margin: 5px 0;"></div>
        <div id="desc"></div>
        <button class="btn-next" id="next" onclick="nextQ()">C√¢u ti·∫øp theo ‚ûî</button>
    </div>
</div>

<script>
    const data = [
        { q: "Ïù¥Î¶ÑÏù¥ Î¨¥ÏóáÏûÖÎãàÍπå?", a: ["Î¶¨ÌïúÏûÖÎãàÎã§", "ÌïúÍµ≠ÏûÖÎãàÎã§", "ÌöåÏÇ¨ÏõêÏûÖÎãàÎã§", "Î∞òÍ∞ÄÏõåÏöî"], c: 0, e: "ƒê√°p √°n 1: T√¥i l√† Rihan." },
        { q: "ÏßÄÍ∏à Î≠ê Ìï¥Ïöî?", a: ["Ïñ¥Ï†ú ÌñàÏñ¥Ïöî", "ÏöîÎ¶¨ÌïòÍ≥† ÏûàÏñ¥Ïöî", "ÏöîÎ¶¨Í∞Ä ÎßõÏûàÏñ¥Ïöî", "ÏãùÎãπÏóê ÏóÜÏñ¥Ïöî"], c: 1, e: "ƒê√°p √°n 2: ƒêang n·∫•u ƒÉn." },
        { q: "Ïò§Îäò ÎÇ†Ïî®Í∞Ä Ïñ¥ÎïåÏöî?", a: ["ÎÇ†Ïî®Í∞Ä Ï¢ãÏïÑÏöî", "ÎÇ¥Ïùº Í∞à Í±∞ÏòàÏöî", "ÎßëÍ≥† Îî∞ÎúªÌï¥Ïöî", "Ïñ¥Ï†úÎäî Ï∂îÏõ†Ïñ¥Ïöî"], c: 2, e: "ƒê√°p √°n 3: Trong xanh v√† ·∫•m √°p." },
        { q: "ÏãùÎãπÏù¥ Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî?", a: ["ÎπÑÎπîÎ∞•Ïù¥ ÏûàÏñ¥Ïöî", "Ï†ÄÍ∏∞ Í±¥Î¨º Îí§Ïóê ÏûàÏñ¥Ïöî", "Ïò§Îäò Î¨∏ÏùÑ Ïó¥Ïñ¥Ïöî", "ÏπúÍµ¨ÌïòÍ≥† Í∞ÄÏöî"], c: 1, e: "ƒê√°p √°n 2: ·ªû ƒë·∫±ng sau t√≤a nh√†." },
        { q: "ÏÇ¨Í≥º ÏÑ∏ Í∞ú Ï£ºÏÑ∏Ïöî. ÏñºÎßàÏòàÏöî?", a: ["ÏÑ∏ Í∞ú ÏûàÏñ¥Ïöî", "ÏÇ¨Í≥ºÍ∞Ä ÎßõÏûàÏñ¥Ïöî", "Î™®Îëê ÏÇºÏ≤ú ÏõêÏûÖÎãàÎã§", "Ïó¨Í∏∞ÏóêÏÑú ÎìúÏÑ∏Ïöî"], c: 2, e: "ƒê√°p √°n 3: T·∫•t c·∫£ 3,000 Won." },
        { q: "Ïñ¥Ï†ú Î¨¥ÏóáÏùÑ ÌñàÏñ¥Ïöî?", a: ["Í≥µÏõêÏóêÏÑú ÏÇ∞Ï±ÖÌñàÏñ¥Ïöî", "ÏßÄÍ∏à Ïö¥ÎèôÌï¥Ïöî", "ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇòÏöî", "ÏòÅÌôîÍ∞Ä Ïû¨ÎØ∏ÏûàÏñ¥Ïöî"], c: 0, e: "ƒê√°p √°n 1: ƒê√£ ƒëi d·∫°o c√¥ng vi√™n." },
        { q: "ÏÉùÏùºÏù¥ Ïñ∏Ï†úÏòàÏöî?", a: ["Ï†ú ÎèôÏÉù ÏÉùÏùºÏù¥ÏóêÏöî", "ÏãúÏõî Ïã≠Ïò§ÏùºÏù¥ÏóêÏöî", "ÏßëÏóêÏÑú ÌååÌã∞Î•º Ìï¥Ïöî", "ÏπúÍµ¨Î•º Ï¥àÎåÄÌñàÏñ¥Ïöî"], c: 1, e: "ƒê√°p √°n 2: Ng√†y 15 th√°ng 10." },
        { q: "Ï£ºÎßêÏóê Î≥¥ÌÜµ Î≠ê Ìï¥Ïöî?", a: ["ÏßÄÎÇú Ï£ºÎßêÏóê Í∞îÏñ¥Ïöî", "ÏßëÏóêÏÑú Ìëπ Ïâ¨Ïñ¥Ïöî", "ÌÜ†ÏöîÏùºÏù¥ Ï¢ãÏïÑÏöî", "ÏõîÏöîÏùºÏóê Ï∂úÍ∑ºÌï¥Ïöî"], c: 1, e: "ƒê√°p √°n 2: Ngh·ªâ ng∆°i ·ªü nh√†." },
        { q: "Ïã§Î°ÄÏßÄÎßå ÎÇòÏù¥Í∞Ä Ïñ¥ÎñªÍ≤å ÎêòÏÑ∏Ïöî?", a: ["ÏÑúÎ•∏ ÏÇ¥Ïù¥ÏóêÏöî", "Ïù¥Î¶ÑÏù¥ ÏïÑÎãàÏóêÏöî", "ÌïôÏÉùÏù¥ ÏïÑÎãàÏóêÏöî", "Ï†ú ÏπúÍµ¨ÏòàÏöî"], c: 0, e: "ƒê√°p √°n 1: 30 tu·ªïi." },
        { q: "ÌïúÍµ≠Ïóê Ïôú ÏôîÏñ¥Ïöî?", a: ["ÎπÑÌñâÍ∏∞Î°ú ÏôîÏñ¥Ïöî", "ÏûëÎÖÑ 10ÏõîÏóê ÏôîÏñ¥Ïöî", "ÏùºÌïòÎü¨ ÏôîÏñ¥Ïöî", "ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏóêÏöî"], c: 2, e: "ƒê√°p √°n 3: ƒê·∫øn ƒë·ªÉ l√†m vi·ªác." }
    ];

    let idx = 0, answered = false;

    function handleSpeak() {
        // Ch·ªëng hi·ªán t∆∞·ª£ng b·ªã ch·∫∑n √¢m thanh tr√™n Chrome/Safari
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance();
            msg.text = data[idx].q;
            msg.lang = 'ko-KR';
            msg.rate = 0.8; // T·ªëc ƒë·ªô v·ª´a ph·∫£i
            
            // T√¨m gi·ªçng n·ªØ ti·∫øng H√†n
            const voices = window.speechSynthesis.getVoices();
            const femaleVoice = voices.find(v => v.lang.includes('ko') && (v.name.includes('Sora') || v.name.includes('Google') || v.name.includes('Yuna')));
            if (femaleVoice) msg.voice = femaleVoice;

            window.speechSynthesis.speak(msg);
        } else {
            alert("Tr√¨nh duy·ªát c·ªßa b·∫°n qu√° c≈©, vui l√≤ng c·∫≠p nh·∫≠t Chrome!");
        }
    }

    function load() {
        answered = false;
        document.getElementById('pos').innerText = idx + 1;
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next').style.display = 'none';
        const opt = document.getElementById('options');
        opt.innerHTML = "";
        data[idx].a.forEach((item, i) => {
            const b = document.createElement('button');
            b.innerText = (i + 1) + ". " + item;
            b.onclick = () => {
                if(answered) return; answered = true;
                document.getElementById('script').innerText = data[idx].q;
                document.getElementById('desc').innerText = data[idx].e;
                document.getElementById('explanation').style.display = 'block';
                document.getElementById('next').style.display = 'block';
                b.style.background = (i === data[idx].c) ? "#d4edda" : "#f8d7da";
                b.style.borderColor = (i === data[idx].c) ? "#28a745" : "#dc3545";
            };
            opt.appendChild(b);
        });
    }

    function nextQ() {
        idx++;
        if(idx < data.length) load();
        else alert("Ho√†n th√†nh b√†i luy·ªán nghe!");
    }

    // K√≠ch ho·∫°t n·∫°p gi·ªçng n√≥i cho h·ªá th·ªëng
    window.speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };
    load();
</script>
</body>
</html>
