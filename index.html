<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPS-TOPIK 2024 - Luy·ªán Nghe (Gi·ªçng N·ªØ Ch·∫≠m)</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; text-align: center; padding: 20px; background-color: #f0f4f8; color: #333; }
        .container { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); display: inline-block; max-width: 500px; width: 100%; text-align: left; }
        .progress { font-weight: bold; color: #007bff; margin-bottom: 15px; text-align: center; font-size: 1.1em; }
        button { display: block; width: 100%; margin: 10px 0; padding: 14px; font-size: 16px; cursor: pointer; border: 2px solid #eee; border-radius: 12px; transition: 0.3s; background: white; text-align: left; -webkit-tap-highlight-color: transparent; }
        button:hover:not(:disabled) { background-color: #f1faff; border-color: #007bff; }
        .btn-listen { background-color: #28a745; color: white; font-weight: bold; border: none; text-align: center; font-size: 18px; }
        .btn-next { background-color: #007bff; color: white; font-weight: bold; border: none; text-align: center; display: none; margin-top: 20px; }
        #explanation { display: none; padding: 15px; border-radius: 10px; margin-top: 15px; line-height: 1.6; background-color: #fff3cd; border: 1px solid #ffeeba; }
        .script-header { font-weight: bold; color: #007bff; display: block; margin-bottom: 5px; border-bottom: 1px dashed #007bff; }
        #result-screen { display: none; text-align: center; }
        .score { font-size: 60px; color: #2ecc71; font-weight: bold; margin: 20px 0; }
    </style>
</head>
<body>

<div class="container" id="quiz-screen">
    <div class="progress">C√¢u h·ªèi: <span id="current-pos">1</span>/10</div>
    <button class="btn-listen" id="listen-btn" onclick="speak()">üîä Nghe c√¢u h·ªèi (Gi·ªçng N·ªØ Ch·∫≠m)</button>
    
    <div id="options" style="margin-top: 20px;"></div>

    <div id="explanation">
        <span class="script-header">C√¢u h·ªèi v·ª´a nghe:</span>
        <div style="font-weight: bold; margin-bottom: 10px;" id="script-display"></div>
        <div id="exp-content"></div>
        <button class="btn-next" id="next-btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚ûî</button>
    </div>
</div>

<div class="container" id="result-screen">
    <h2>K·∫øt qu·∫£ b√†i t·∫≠p</h2>
    <div class="score" id="total-score">0/10</div>
    <button onclick="location.reload()" style="background: #34495e; color: white; text-align: center;">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
</div>

<script>
    const questions = [
        { q_audio: "Ïù¥Î¶ÑÏù¥, Î¨¥ÏóáÏûÖÎãàÍπå?", q_display: "Ïù¥Î¶ÑÏù¥ Î¨¥ÏóáÏûÖÎãàÍπå?", a: ["Î¶¨ÌïúÏûÖÎãàÎã§", "ÌïúÍµ≠ÏûÖÎãàÎã§", "ÌöåÏÇ¨ÏõêÏûÖÎãàÎã§", "Î∞òÍ∞ÄÏõåÏöî"], correct: 0, exp: "H·ªèi t√™n. ƒê√°p √°n 1: 'T√¥i l√† Rihan'." },
        { q_audio: "ÏßÄÍ∏à, Î≠ê Ìï¥Ïöî?", q_display: "ÏßÄÍ∏à Î≠ê Ìï¥Ïöî?", a: ["Ïñ¥Ï†ú ÌñàÏñ¥Ïöî", "ÏöîÎ¶¨ÌïòÍ≥† ÏûàÏñ¥Ïöî", "ÏöîÎ¶¨Í∞Ä ÎßõÏûàÏñ¥Ïöî", "ÏãùÎãπÏóê ÏóÜÏñ¥Ïöî"], correct: 1, exp: "H·ªèi h√†nh ƒë·ªông hi·ªán t·∫°i. ƒê√°p √°n 2: 'ƒêang n·∫•u ƒÉn'." },
        { q_audio: "Ïò§Îäò, ÎÇ†Ïî®Í∞Ä, Ïñ¥ÎïåÏöî?", q_display: "Ïò§Îäò ÎÇ†Ïî®Í∞Ä Ïñ¥ÎïåÏöî?", a: ["ÎÇ†Ïî®Í∞Ä Ï¢ãÏïÑÏöî", "ÎÇ¥Ïùº Í∞à Í±∞ÏòàÏöî", "ÎßëÍ≥† Îî∞ÎúªÌï¥Ïöî", "Ïñ¥Ï†úÎäî Ï∂îÏõ†Ïñ¥Ïöî"], correct: 2, exp: "H·ªèi th·ªùi ti·∫øt. ƒê√°p √°n 3: 'Trong xanh v√† ·∫•m √°p'." },
        { q_audio: "ÏãùÎãπÏù¥, Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî?", q_display: "ÏãùÎãπÏù¥ Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî?", a: ["ÎπÑÎπîÎ∞•Ïù¥ ÏûàÏñ¥Ïöî", "Ï†ÄÍ∏∞ Í±¥Î¨º Îí§Ïóê ÏûàÏñ¥Ïöî", "Ïò§Îäò Î¨∏ÏùÑ Ïó¥Ïñ¥Ïöî", "ÏπúÍµ¨ÌïòÍ≥† Í∞ÄÏöî"], correct: 1, exp: "H·ªèi v·ªã tr√≠. ƒê√°p √°n 2: '·ªû ƒë·∫±ng sau t√≤a nh√† kia'." },
        { q_audio: "ÏÇ¨Í≥º ÏÑ∏ Í∞ú Ï£ºÏÑ∏Ïöî, ÏñºÎßàÏòàÏöî?", q_display: "ÏÇ¨Í≥º ÏÑ∏ Í∞ú Ï£ºÏÑ∏Ïöî. ÏñºÎßàÏòàÏöî?", a: ["ÏÑ∏ Í∞ú ÏûàÏñ¥Ïöî", "ÏÇ¨Í≥ºÍ∞Ä ÎßõÏûàÏñ¥Ïöî", "Î™®Îëê ÏÇºÏ≤ú ÏõêÏûÖÎãàÎã§", "Ïó¨Í∏∞ÏóêÏÑú ÎìúÏÑ∏Ïöî"], correct: 2, exp: "H·ªèi gi√° ti·ªÅn. ƒê√°p √°n 3: 'T·∫•t c·∫£ l√† 3,000 Won'." },
        { q_audio: "Ïñ¥Ï†ú, Î¨¥ÏóáÏùÑ ÌñàÏñ¥Ïöî?", q_display: "Ïñ¥Ï†ú Î¨¥ÏóáÏùÑ ÌñàÏñ¥Ïöî?", a: ["Í≥µÏõêÏóêÏÑú ÏÇ∞Ï±ÖÌñàÏñ¥Ïöî", "ÏßÄÍ∏à Ïö¥ÎèôÌï¥Ïöî", "ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇòÏöî", "ÏòÅÌôîÍ∞Ä Ïû¨ÎØ∏ÏûàÏñ¥Ïöî"], correct: 0, exp: "H·ªèi qu√° kh·ª©. ƒê√°p √°n 1: 'ƒê√£ ƒëi d·∫°o ·ªü c√¥ng vi√™n'." },
        { q_audio: "ÏÉùÏùºÏù¥, Ïñ∏Ï†úÏòàÏöî?", q_display: "ÏÉùÏùºÏù¥ Ïñ∏Ï†úÏòàÏöî?", a: ["Ï†ú ÎèôÏÉù ÏÉùÏùºÏù¥ÏóêÏöî", "ÏãúÏõî Ïã≠Ïò§ÏùºÏù¥ÏóêÏöî", "ÏßëÏóêÏÑú ÌååÌã∞Î•º Ìï¥Ïöî", "ÏπúÍµ¨Î•º Ï¥àÎåÄÌñàÏñ¥Ïöî"], correct: 1, exp: "H·ªèi th·ªùi gian. ƒê√°p √°n 2: 'Ng√†y 15 th√°ng 10'." },
        { q_audio: "Ï£ºÎßêÏóê, Î≥¥ÌÜµ, Î≠ê Ìï¥Ïöî?", q_display: "Ï£ºÎßêÏóê Î≥¥ÌÜµ Î≠ê Ìï¥Ïöî?", a: ["ÏßÄÎÇú Ï£ºÎßêÏóê Í∞îÏñ¥Ïöî", "ÏßëÏóêÏÑú Ìëπ Ïâ¨Ïñ¥Ïöî", "ÌÜ†ÏöîÏùºÏù¥ Ï¢ãÏïÑÏöî", "ÏõîÏöîÏùºÏóê Ï∂úÍ∑ºÌï¥Ïöî"], correct: 1, exp: "H·ªèi th√≥i quen. ƒê√°p √°n 2: 'Ngh·ªâ ng∆°i ·ªü nh√†'." },
        { q_audio: "Ïã§Î°ÄÏßÄÎßå, ÎÇòÏù¥Í∞Ä, Ïñ¥ÎñªÍ≤å ÎêòÏÑ∏Ïöî?", q_display: "Ïã§Î°ÄÏßÄÎßå, ÎÇòÏù¥Í∞Ä Ïñ¥ÎñªÍ≤å ÎêòÏÑ∏Ïöî?", a: ["ÏÑúÎ•∏ ÏÇ¥Ïù¥ÏóêÏöî", "Ïù¥Î¶ÑÏù¥ ÏïÑÎãàÏóêÏöî", "ÌïôÏÉùÏù¥ ÏïÑÎãàÏóêÏöî", "Ï†ú ÏπúÍµ¨ÏòàÏöî"], correct: 0, exp: "H·ªèi tu·ªïi l·ªãch s·ª±. ƒê√°p √°n 1: 'T√¥i 30 tu·ªïi'." },
        { q_audio: "ÌïúÍµ≠Ïóê, Ïôú ÏôîÏñ¥Ïöî?", q_display: "ÌïúÍµ≠Ïóê Ïôú ÏôîÏñ¥Ïöî?", a: ["ÎπÑÌñâÍ∏∞Î°ú ÏôîÏñ¥Ïöî", "ÏûëÎÖÑ 10ÏõîÏóê ÏôîÏñ¥Ïöî", "ÏùºÌïòÎü¨ ÏôîÏñ¥Ïöî", "ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏóêÏöî"], correct: 2, exp: "H·ªèi l√Ω do. ƒê√°p √°n 3: 'ƒê·∫øn ƒë·ªÉ l√†m vi·ªác'." }
    ];

    let currentIdx = 0, score = 0, answered = false;

    function loadQuestion() {
        answered = false;
        document.getElementById('current-pos').innerText = currentIdx + 1;
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = "";
        
        questions[currentIdx].a.forEach((ans, index) => {
            const btn = document.createElement('button');
            btn.innerText = (index + 1) + ". " + ans;
            btn.id = "opt-" + index;
            btn.onclick = () => checkAnswer(index);
            optionsDiv.appendChild(btn);
        });
    }

    function speak() {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(questions[currentIdx].q_audio);
        utterance.lang = 'ko-KR';
        utterance.rate = 0.7;

        const voices = window.speechSynthesis.getVoices();
        let selectedVoice = voices.find(v => (v.lang.includes('ko') && v.name.includes('Google')) || (v.lang.includes('ko') && v.name.includes('Female')));
        if (!selectedVoice) selectedVoice = voices.find(v => v.lang.includes('ko'));
        
        if (selectedVoice) utterance.voice = selectedVoice;
        window.speechSynthesis.speak(utterance);
    }

    function checkAnswer(selected) {
        if (answered) return;
        answered = true;
        const correct = questions[currentIdx].correct;
        
        document.getElementById('script-display').innerText = questions[currentIdx].q_display;
        document.getElementById('explanation').style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';

        const buttons = document.querySelectorAll('#options button');
        buttons.forEach(b => b.disabled = true);

        if (selected === correct) {
            score++;
            document.getElementById('exp-content').innerHTML = "<b>‚úÖ Ch√≠nh x√°c!</b><br>" + questions[currentIdx].exp;
            document.getElementById('opt-'+selected).style.background = "#d4edda";
            document.getElementById('opt-'+selected).style.borderColor = "#28a745";
        } else {
            document.getElementById('exp-content').innerHTML = "<b>‚ùå Ch∆∞a ƒë√∫ng!</b><br>" + questions[currentIdx].exp;
            document.getElementById('opt-'+selected).style.background = "#f8d7da";
            document.getElementById('opt-'+correct).style.border = "2px solid #28a745";
        }
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < questions.length) {
            loadQuestion();
        } else {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('total-score').innerText = score + "/10";
        }
    }

    // N·∫°p gi·ªçng n√≥i
    window.speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };
    loadQuestion();
</script>
</body>
</html>
