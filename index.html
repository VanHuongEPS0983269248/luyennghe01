<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPS-TOPIK 2024 - Luy·ªán Nghe</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; text-align: center; padding: 20px; background-color: #f0f4f8; }
        .container { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); display: inline-block; max-width: 500px; width: 100%; text-align: left; }
        .progress { font-weight: bold; color: #007bff; margin-bottom: 15px; text-align: center; }
        button { display: block; width: 100%; margin: 10px 0; padding: 14px; font-size: 16px; cursor: pointer; border: 2px solid #eee; border-radius: 12px; transition: 0.3s; background: white; text-align: left; -webkit-tap-highlight-color: transparent; }
        button:hover:not(:disabled) { background-color: #f1faff; border-color: #007bff; }
        .btn-listen { background-color: #28a745; color: white; font-weight: bold; border: none; text-align: center; font-size: 18px; }
        .btn-next { background-color: #007bff; color: white; font-weight: bold; border: none; text-align: center; display: none; margin-top: 20px; }
        #explanation { display: none; padding: 15px; border-radius: 10px; margin-top: 15px; line-height: 1.6; background-color: #fff3cd; }
        #result-screen { display: none; text-align: center; }
        .score { font-size: 60px; color: #2ecc71; font-weight: bold; }
    </style>
</head>
<body>
<div class="container" id="quiz-screen">
    <div class="progress">C√¢u h·ªèi: <span id="current-pos">1</span>/10</div>
    <button class="btn-listen" id="listen-btn" onclick="speak()">üîä Nghe c√¢u h·ªèi (T·ªëc ƒë·ªô 0.7)</button>
    <div id="options" style="margin-top: 20px;"></div>
    <div id="explanation">
        <b style="color:#007bff">C√¢u v·ª´a nghe:</b> <span id="script-display"></span><br>
        <div id="exp-content"></div>
        <button class="btn-next" id="next-btn" onclick="nextQuestion()">Ti·∫øp theo ‚ûî</button>
    </div>
</div>

<div class="container" id="result-screen">
    <h2>Ho√†n th√†nh!</h2>
    <div class="score" id="total-score">0/10</div>
    <button onclick="location.reload()" style="background: #34495e; color: white; text-align: center;">L√†m l·∫°i</button>
</div>

<script>
    const questions = [
        { q: "Ïù¥Î¶ÑÏù¥, Î¨¥ÏóáÏûÖÎãàÍπå?", a: ["Î¶¨ÌïúÏûÖÎãàÎã§", "ÌïúÍµ≠ÏûÖÎãàÎã§", "ÌöåÏÇ¨ÏõêÏûÖÎãàÎã§", "Î∞òÍ∞ÄÏõåÏöî"], correct: 0, exp: "H·ªèi t√™n. ƒê√°p √°n 1: T√¥i l√† Rihan." },
        { q: "ÏßÄÍ∏à, Î≠ê Ìï¥Ïöî?", a: ["Ïñ¥Ï†ú ÌñàÏñ¥Ïöî", "ÏöîÎ¶¨ÌïòÍ≥† ÏûàÏñ¥Ïöî", "ÏöîÎ¶¨Í∞Ä ÎßõÏûàÏñ¥Ïöî", "ÏãùÎãπÏóê ÏóÜÏñ¥Ïöî"], correct: 1, exp: "H·ªèi h√†nh ƒë·ªông b√¢y gi·ªù. ƒê√°p √°n 2: ƒêang n·∫•u ƒÉn." },
        { q: "Ïò§Îäò, ÎÇ†Ïî®Í∞Ä, Ïñ¥ÎïåÏöî?", a: ["ÎÇ†Ïî®Í∞Ä Ï¢ãÏïÑÏöî", "ÎÇ¥Ïùº Í∞à Í±∞ÏòàÏöî", "ÎßëÍ≥† Îî∞ÎúªÌï¥Ïöî", "Ïñ¥Ï†úÎäî Ï∂îÏõ†Ïñ¥Ïöî"], correct: 2, exp: "H·ªèi th·ªùi ti·∫øt. ƒê√°p √°n 3: Trong xanh v√† ·∫•m √°p." },
        { q: "ÏãùÎãπÏù¥, Ïñ¥ÎîîÏóê ÏûàÏñ¥Ïöî?", a: ["ÎπÑÎπîÎ∞•Ïù¥ ÏûàÏñ¥Ïöî", "Ï†ÄÍ∏∞ Í±¥Î¨º Îí§Ïóê ÏûàÏñ¥Ïöî", "Ïò§Îäò Î¨∏ÏùÑ Ïó¥Ïñ¥Ïöî", "ÏπúÍµ¨ÌïòÍ≥† Í∞ÄÏöî"], correct: 1, exp: "H·ªèi n∆°i ch·ªën. ƒê√°p √°n 2: ·ªû ƒë·∫±ng sau t√≤a nh√†." },
        { q: "ÏÇ¨Í≥º ÏÑ∏ Í∞ú Ï£ºÏÑ∏Ïöî, ÏñºÎßàÏòàÏöî?", a: ["ÏÑ∏ Í∞ú ÏûàÏñ¥Ïöî", "ÏÇ¨Í≥ºÍ∞Ä ÎßõÏûàÏñ¥Ïöî", "Î™®Îëê ÏÇºÏ≤ú ÏõêÏûÖÎãàÎã§", "Ïó¨Í∏∞ÏóêÏÑú ÎìúÏÑ∏Ïöî"], correct: 2, exp: "H·ªèi gi√° ti·ªÅn. ƒê√°p √°n 3: T·∫•t c·∫£ 3,000 Won." },
        { q: "Ïñ¥Ï†ú, Î¨¥ÏóáÏùÑ ÌñàÏñ¥Ïöî?", a: ["Í≥µÏõêÏóêÏÑú ÏÇ∞Ï±ÖÌñàÏñ¥Ïöî", "ÏßÄÍ∏à Ïö¥ÎèôÌï¥Ïöî", "ÎÇ¥Ïùº ÏπúÍµ¨Î•º ÎßåÎÇòÏöî", "ÏòÅÌôîÍ∞Ä Ïû¨ÎØ∏ÏûàÏñ¥Ïöî"], correct: 0, exp: "H·ªèi qu√° kh·ª©. ƒê√°p √°n 1: ƒê√£ ƒëi d·∫°o c√¥ng vi√™n." },
        { q: "ÏÉùÏùºÏù¥, Ïñ∏Ï†úÏòàÏöî?", a: ["Ï†ú ÎèôÏÉù ÏÉùÏùºÏù¥ÏóêÏöî", "ÏãúÏõî Ïã≠Ïò§ÏùºÏù¥ÏóêÏöî", "ÏßëÏóêÏÑú ÌååÌã∞Î•º Ìï¥Ïöî", "ÏπúÍµ¨Î•º Ï¥àÎåÄÌñàÏñ¥Ïöî"], correct: 1, exp: "H·ªèi th·ªùi gian. ƒê√°p √°n 2: Ng√†y 15 th√°ng 10." },
        { q: "Ï£ºÎßêÏóê, Î≥¥ÌÜµ, Î≠ê Ìï¥Ïöî?", a: ["ÏßÄÎÇú Ï£ºÎßêÏóê Í∞îÏñ¥Ïöî", "ÏßëÏóêÏÑú Ìëπ Ïâ¨Ïñ¥Ïöî", "ÌÜ†ÏöîÏùºÏù¥ Ï¢ãÏïÑÏöî", "ÏõîÏöîÏùºÏóê Ï∂úÍ∑ºÌï¥Ïöî"], correct: 1, exp: "H·ªèi th√≥i quen. ƒê√°p √°n 2: Ngh·ªâ ng∆°i ·ªü nh√†." },
        { q: "Ïã§Î°ÄÏßÄÎßå, ÎÇòÏù¥Í∞Ä, Ïñ¥ÎñªÍ≤å ÎêòÏÑ∏Ïöî?", a: ["ÏÑúÎ•∏ ÏÇ¥Ïù¥ÏóêÏöî", "Ïù¥Î¶ÑÏù¥ ÏïÑÎãàÏóêÏöî", "ÌïôÏÉùÏù¥ ÏïÑÎãàÏóêÏöî", "Ï†ú ÏπúÍµ¨ÏòàÏöî"], correct: 0, exp: "H·ªèi tu·ªïi l·ªãch s·ª±. ƒê√°p √°n 1: 30 tu·ªïi." },
        { q: "ÌïúÍµ≠Ïóê, Ïôú ÏôîÏñ¥Ïöî?", a: ["ÎπÑÌñâÍ∏∞Î°ú ÏôîÏñ¥Ïöî", "ÏûëÎÖÑ 10ÏõîÏóê ÏôîÏñ¥Ïöî", "ÏùºÌïòÎü¨ ÏôîÏñ¥Ïöî", "ÌïúÍµ≠ ÏÇ¨ÎûåÏù¥ ÏïÑÎãàÏóêÏöî"], correct: 2, exp: "H·ªèi l√Ω do. ƒê√°p √°n 3: ƒê·∫øn ƒë·ªÉ l√†m vi·ªác." }
    ];

    let currentIdx = 0, score = 0, answered = false;

    function loadQuestion() {
        answered = false;
        document.getElementById('current-pos').innerText = currentIdx + 1;
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = "";
        questions[currentIdx].a.forEach((ans, index) => {
            const btn = document.createElement('button');
            btn.innerText = (index + 1) + ". " + ans;
            btn.onclick = () => checkAnswer(index);
            optionsDiv.appendChild(btn);
        });
    }

    function speak() {
        window.speechSynthesis.cancel(); // D·ª´ng c√°c gi·ªçng ƒë·ªçc c≈©
        const utterance = new SpeechSynthesisUtterance(questions[currentIdx].q);
        utterance.lang = 'ko-KR'; // √âp ng√¥n ng·ªØ ti·∫øng H√†n
        utterance.rate = 0.7; // T·ªëc ƒë·ªô ch·∫≠m
        
        // T√¨m gi·ªçng ƒë·ªçc ti·∫øng H√†n chu·∫©n nh·∫•t tr√™n thi·∫øt b·ªã
        const voices = window.speechSynthesis.getVoices();
        const koVoice = voices.find(v => v.lang.includes('ko'));
        if (koVoice) utterance.voice = koVoice;

        window.speechSynthesis.speak(utterance);
    }

    function checkAnswer(selected) {
        if (answered) return; answered = true;
        const correct = questions[currentIdx].correct;
        document.getElementById('script-display').innerText = questions[currentIdx].q.replace(/,/g, "");
        document.getElementById('explanation').style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';
        
        if (selected === correct) {
            score++;
            document.getElementById('exp-content').innerHTML = "‚úÖ <b>ƒê√∫ng!</b> " + questions[currentIdx].exp;
        } else {
            document.getElementById('exp-content').innerHTML = "‚ùå <b>Sai!</b> " + questions[currentIdx].exp;
        }
        document.querySelectorAll('#options button').forEach(b => b.disabled = true);
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < questions.length) loadQuestion();
        else {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('total-score').innerText = score + "/10";
        }
    }

    // K√≠ch ho·∫°t n·∫°p gi·ªçng n√≥i cho m·ªôt s·ªë tr√¨nh duy·ªát di ƒë·ªông
    window.speechSynthesis.getVoices();
    loadQuestion();
</script>
</body>
</html>
