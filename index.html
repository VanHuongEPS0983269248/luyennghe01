<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPS-TOPIK Luy·ªán Nghe</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; text-align: center; padding: 20px; background-color: #f0f4f8; }
        .container { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); display: inline-block; max-width: 450px; width: 100%; text-align: left; }
        button { display: block; width: 100%; margin: 10px 0; padding: 15px; font-size: 16px; border-radius: 12px; border: 1px solid #ddd; background: #fff; cursor: pointer; transition: 0.2s; }
        .btn-listen { background: #28a745; color: white; border: none; font-weight: bold; font-size: 18px; text-align: center; }
        .btn-listen:active { background: #218838; }
        #explanation { display: none; margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 10px; border: 1px solid #ffeeba; }
        .btn-next { background: #007bff; color: white; border: none; display: none; margin-top: 10px; padding: 12px; border-radius: 10px; width: 100%; text-align: center; font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <div style="text-align:center; font-weight:bold; color:#007bff; margin-bottom:10px;">C√¢u h·ªèi: <span id="pos">1</span>/10</div>
    <button class="btn-listen" onclick="handleSpeak()">üîä B·∫•m ƒë·ªÉ nghe c√¢u h·ªèi</button>
    <div id="options"></div>
    <div id="explanation">
        <b style="color:#007bff">N·ªôi dung nghe:</b> <div id="script" style="font-weight:bold; margin: 5px 0;"></div>
        <div id="desc"></div>
        <button class="btn-next" id="next" onclick="nextQ()">C√¢u ti·∫øp theo ‚ûî</button>
    </div>
</div>

<script>
    const data = [
        { q: "Ïù¥ ÏÇ¨ÎûåÏùÄ ÎàÑÍµ¨ÏûÖÎãàÍπå?", a: ["ÎèôÏÉùÏûÖÎãàÎã§", "ÌöåÏÇ¨ÏûÖÎãàÎã§", "ÏÑ†ÏÉùÎãòÏûÖÎãàÎã§", "Ïö∞Î¶¨ ÏßëÏûÖÎãàÎã§"], c: 2, e: "D·∫°ng b√†i x√°c ƒë·ªãnh ng∆∞·ªùi (ÎàÑÍµ¨). ƒê√°p √°n 3: L√† gi√°o vi√™n." },
        { q: "ÎÇ¥ÏùºÏù¥ Î¨¥Ïä® ÏöîÏùºÏûÖÎãàÍπå?", a: ["ÏàòÏöîÏùºÏûÖÎãàÎã§", "Ïò§Ï†Ñ 10ÏãúÏûÖÎãàÎã§", "Ïñ¥Ï†úÍ∞Ä ÏïÑÎãôÎãàÎã§", "ÌïúÍµ≠Ïóê Í∞ëÎãàÎã§"], c: 0, e: "D·∫°ng b√†i h·ªèi th·ª© (Î¨¥Ïä® ÏöîÏùº). ƒê√°p √°n 1: L√† th·ª© T∆∞." },
        { q: "Í∞ÄÏ°±Ïù¥ Î™á Î™ÖÏûÖÎãàÍπå?", a: ["ÌïôÏÉùÏûÖÎãàÎã§", "ÏïÑÎ≤ÑÏßÄÏûÖÎãàÎã§", "ÎÑ§ Î™ÖÏûÖÎãàÎã§", "ÏßëÏóê ÏûàÏäµÎãàÎã§"], c: 2, e: "D·∫°ng b√†i h·ªèi s·ªë l∆∞·ª£ng ng∆∞·ªùi (Î™á Î™Ö). ƒê√°p √°n 3: C√≥ 4 ng∆∞·ªùi." },
        { q: "Ïñ∏Ï†ú ÌïúÍµ≠Ïóê ÏôîÏäµÎãàÍπå?", a: ["ÎπÑÌñâÍ∏∞Î°ú ÏôîÏäµÎãàÎã§", "ÏûëÎÖÑ 7ÏõîÏóê ÏôîÏäµÎãàÎã§", "ÏπúÍµ¨Îûë ÏôîÏäµÎãàÎã§", "ÌïúÍµ≠Ïù¥ Ï¢ãÏäµÎãàÎã§"], c: 1, e: "D·∫°ng b√†i h·ªèi th·ªùi gian (Ïñ∏Ï†ú). ƒê√°p √°n 2: ƒê√£ ƒë·∫øn v√†o th√°ng 7 nƒÉm ngo√°i." },
        { q: "Í≥µÏû•ÏóêÏÑú Î¨¥ÏóáÏùÑ Ìï©ÎãàÍπå?", a: ["Í∞ÄÍµ¨Î•º ÎßåÎì≠ÎãàÎã§", "Í≥µÏû•Ïóê Í∞ëÎãàÎã§", "Î≤ÑÏä§Î°ú Í∞ëÎãàÎã§", "Ïò§Îäò ÏùºÌï©ÎãàÎã§"], c: 0, e: "D·∫°ng b√†i h·ªèi h√†nh ƒë·ªông (Î¨¥Ïóá). ƒê√°p √°n 1: L√†m ƒë·ªì n·ªôi th·∫•t." },
        { q: "Ï£ºÎßêÏóê Î≥¥ÌÜµ Î≠ê Ìï©ÎãàÍπå?", a: ["Ï£ºÎßêÏù¥ ÏïÑÎãôÎãàÎã§", "ÏßëÏóêÏÑú Ï±ÖÏùÑ ÏùΩÏäµÎãàÎã§", "Í≥µÏõêÏù¥ ÎÑìÏäµÎãàÎã§", "ÏßÄÎÇú Ï£ºÏóê ÌñàÏäµÎãàÎã§"], c: 1, e: "H·ªèi th√≥i quen cu·ªëi tu·∫ßn. ƒê√°p √°n 2: ƒê·ªçc s√°ch ·ªü nh√†." },
        { q: "Ïª§Ìîº Ìïú ÏûîÏóê ÏñºÎßàÏûÖÎãàÍπå?", a: ["Îëê Ïûî Ï£ºÏÑ∏Ïöî", "Ïª§ÌîºÍ∞Ä ÎßõÏûàÏäµÎãàÎã§", "Ïù¥Ï≤ú ÏõêÏûÖÎãàÎã§", "Ïª§ÌîºÏàçÏóê ÏûàÏäµÎãàÎã§"], c: 2, e: "D·∫°ng b√†i h·ªèi gi√° ti·ªÅn (ÏñºÎßà). ƒê√°p √°n 3: 2,000 Won." },
        { q: "Ïù¥Í≤ÉÏùÄ Ïù¥Î¶ÑÏù¥ Î¨¥ÏóáÏûÖÎãàÍπå?", a: ["Í∞ÄÎ∞©ÏûÖÎãàÎã§", "ÏùòÏûêÏûÖÎãàÎã§", "ÌïÑÌÜµÏûÖÎãàÎã§", "Ïó∞ÌïÑÏûÖÎãàÎã§"], c: 0, e: "Nh√¨n tranh ƒëo√°n v·∫≠t (th∆∞·ªùng l√† c√°i t√∫i - Í∞ÄÎ∞©). ƒê√°p √°n 1: L√† c√°i t√∫i." },
        { q: "Ïó¨Í∏∞ÏóêÏÑú ÏãúÏ≤≠ÍπåÏßÄ Ïñ¥ÎñªÍ≤å Í∞ëÎãàÍπå?", a: ["ÏãúÏ≤≠Ïù¥ Í∞ÄÍπùÏäµÎãàÎã§", "Î≤ÑÏä§Î•º ÌÉÄÍ≥† Í∞ëÎãàÎã§", "ÎÇ¥Ïùº Í∞ÄÍ≤†ÏäµÎãàÎã§", "ÏßÄÍ∏àÏùÄ Ïïà Í∞ëÎãàÎã§"], c: 1, e: "H·ªèi ph∆∞∆°ng ti·ªán/c√°ch ƒëi (Ïñ¥ÎñªÍ≤å). ƒê√°p √°n 2: ƒêi b·∫±ng xe bu√Ωt." },
        { q: "ÏÉùÏùºÏù¥ Ïñ∏Ï†úÏûÖÎãàÍπå?", a: ["ÏÇºÏõî Ïã≠ÏùºÏùºÏûÖÎãàÎã§", "ÎÇ¥Ïùº ÏπúÍµ¨ ÎßåÎÇòÏöî", "ÏÑ†Î¨ºÏùÑ Î∞õÏïòÏäµÎãàÎã§", "ÌååÌã∞Í∞Ä Ïû¨ÎØ∏ÏûàÏñ¥Ïöî"], c: 0, e: "H·ªèi ng√†y sinh nh·∫≠t (Ïñ∏Ï†ú). ƒê√°p √°n 1: Ng√†y 11 th√°ng 3." }
    ];

    let idx = 0, answered = false;

    function handleSpeak() {
        // Ch·ªëng hi·ªán t∆∞·ª£ng b·ªã ch·∫∑n √¢m thanh tr√™n Chrome/Safari
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance();
            msg.text = data[idx].q;
            msg.lang = 'ko-KR';
            msg.rate = 0.8; // T·ªëc ƒë·ªô v·ª´a ph·∫£i
            
            // T√¨m gi·ªçng n·ªØ ti·∫øng H√†n
            const voices = window.speechSynthesis.getVoices();
            const femaleVoice = voices.find(v => v.lang.includes('ko') && (v.name.includes('Sora') || v.name.includes('Google') || v.name.includes('Yuna')));
            if (femaleVoice) msg.voice = femaleVoice;

            window.speechSynthesis.speak(msg);
        } else {
            alert("Tr√¨nh duy·ªát c·ªßa b·∫°n qu√° c≈©, vui l√≤ng c·∫≠p nh·∫≠t Chrome!");
        }
    }

    function load() {
        answered = false;
        document.getElementById('pos').innerText = idx + 1;
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next').style.display = 'none';
        const opt = document.getElementById('options');
        opt.innerHTML = "";
        data[idx].a.forEach((item, i) => {
            const b = document.createElement('button');
            b.innerText = (i + 1) + ". " + item;
            b.onclick = () => {
                if(answered) return; answered = true;
                document.getElementById('script').innerText = data[idx].q;
                document.getElementById('desc').innerText = data[idx].e;
                document.getElementById('explanation').style.display = 'block';
                document.getElementById('next').style.display = 'block';
                b.style.background = (i === data[idx].c) ? "#d4edda" : "#f8d7da";
                b.style.borderColor = (i === data[idx].c) ? "#28a745" : "#dc3545";
            };
            opt.appendChild(b);
        });
    }

    function nextQ() {
        idx++;
        if(idx < data.length) load();
        else alert("Ho√†n th√†nh b√†i luy·ªán nghe!");
    }

    // K√≠ch ho·∫°t n·∫°p gi·ªçng n√≥i cho h·ªá th·ªëng
    window.speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };
    load();
</script>
</body>
</html>

